<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>马克思主义原理笔记</title>
      <link href="/2023/08/31/ma-ke-si-zhu-yi-yuan-li-bi-ji/"/>
      <url>/2023/08/31/ma-ke-si-zhu-yi-yuan-li-bi-ji/</url>
      
        <content type="html"><![CDATA[<h1 id="马克思主义原理课堂笔记"><a href="#马克思主义原理课堂笔记" class="headerlink" title="马克思主义原理课堂笔记"></a>马克思主义原理课堂笔记</h1><h2 id="绪论"><a href="#绪论" class="headerlink" title="绪论"></a>绪论</h2><ol><li>马克思主义的三个基本组成部分：<strong>马克思主义哲学</strong>，<strong>马克思主义政治经济学</strong>，<strong>科学社会主义</strong></li><li>19世纪的社会灾难：<strong>社会两极分化，工人极端困苦</strong></li></ol><p>​   <strong>周期性经济危机频繁爆发</strong></p><ol start="3"><li>马克思主义</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> 课程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>立创梁山派移植红外遥控</title>
      <link href="/2023/08/31/li-chuang-liang-shan-pai-yi-zhi-hong-wai-yao-kong/"/>
      <url>/2023/08/31/li-chuang-liang-shan-pai-yi-zhi-hong-wai-yao-kong/</url>
      
        <content type="html"><![CDATA[<h1 id="HX1838接收头——红外遥控器模块"><a href="#HX1838接收头——红外遥控器模块" class="headerlink" title="HX1838接收头——红外遥控器模块"></a>HX1838接收头——红外遥控器模块</h1><p>​HX1838红外接收模块采用HX1838红外接收管,灵敏度高,数字量输出，设有固定螺栓孔，方便安装，带有红色安装指示灯。新型的超薄 38K 通用红外遥控器，采用的是 NEC 编码格式，主要用于车载 MP3、足浴盆、灯光设配、数码相框、单片机开发板和学习板等场合。因其是基于无线遥控，因此人们在使用起来显得方便、有效，现在的应用领域也越来越宽。</p><h2 id="1-模块来源"><a href="#1-模块来源" class="headerlink" title="1. 模块来源"></a>1. 模块来源</h2><table><thead><tr><th>采购链接<a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.6f7f2e8dK1h41j&amp;id=548823910606&amp;_u=83nd30ug09ae">https://item.taobao.com/item.htm?spm=a1z09.2.0.0.6f7f2e8dK1h41j&amp;id=548823910606&amp;_u=83nd30ug09ae</a></th><th><img src="https://blogfxy.oss-cn-beijing.aliyuncs.com/pic_of_HX1838.PNG"></th></tr></thead><tbody><tr><td>资料下载：<a href="https://pan.baidu.com/s/1MteiSMpdFRif2KoJpL5TNg">https://pan.baidu.com/s/1MteiSMpdFRif2KoJpL5TNg</a>   提取码：t52l</td><td></td></tr></tbody></table><h2 id="2-规格参数"><a href="#2-规格参数" class="headerlink" title="2.规格参数"></a>2.规格参数</h2><p><strong>遥控器：</strong></p><p>​    <strong>CR2025环保纽扣电池，容量160mah</strong></p><p>​    <strong>发射距离：8m以上（具体和周围环境、接收端的灵敏度等因素有关)</strong></p><p>​    <strong>有效角度：60度</strong></p><p>​    <strong>面贴材料：0.125mmPET，有效寿命2万次</strong></p><p>​    <strong>静态电流3-5uA,动态电流3-5mA</strong></p><p><strong>接收头：</strong></p><p>​    <strong>工作电压：2.7~5.5V</strong>  <strong>工作电流：1.4mA</strong>  <strong>接收距离：15M</strong>  <strong>载波频率：38KHz</strong>  <strong>有效角度：±45°</strong></p><h2 id="3-模块原理"><a href="#3-模块原理" class="headerlink" title="3. 模块原理"></a>3. 模块原理</h2><p>暂时不写</p><h2 id="4-移植工程"><a href="#4-移植工程" class="headerlink" title="4. 移植工程"></a>4. 移植工程</h2><p>​将各引脚与立创·梁山派连接，并编写bsp_nec.c和bsp_nec.h文件，基于此代码实现将红外遥控器按下的按钮输出到串口显示。</p><h3 id="4-1-引脚选择"><a href="#4-1-引脚选择" class="headerlink" title="4.1 引脚选择"></a>4.1 引脚选择</h3><table><thead><tr><th align="center">HX1838</th><th align="center">立创 · 梁山派</th></tr></thead><tbody><tr><td align="center">-</td><td align="center">GND</td></tr><tr><td align="center">+</td><td align="center">VCC</td></tr><tr><td align="center">S</td><td align="center">PB3</td></tr></tbody></table><p><img src="https://blogfxy.oss-cn-beijing.aliyuncs.com/pic_of_yinjiao.png"></p><h3 id="4-2-移植步骤"><a href="#4-2-移植步骤" class="headerlink" title="4.2 移植步骤"></a>4.2 移植步骤</h3><p><strong>bsp_nec.c代码的编写</strong></p><pre class="line-numbers language-C" data-language="C"><code class="language-C"> /********************************************************************************   * 测试硬件：立创·梁山派开发板GD32F470ZGT6    使用主频200Mhz    晶振25Mhz   * 版 本 号: V1.0   * 修改作者: FuXiangyang   * 修改日期: 2023年08月08日   * 功能介绍:           *********************************************************************************/ #include "bsp_nec.h"/****************************************************************** * 函 数 名 称：nec_init * 函 数 说 明：初始化接收头引脚并设置中断 * 函 数 形 参：无 * 函 数 返 回：无 * 作       者：FuXiangyang * 备       注：无******************************************************************/void nec_init(void){        /*使能时钟*/        rcu_periph_clock_enable(BSP_NEC_RCU);        /*系统配置时钟*/        rcu_periph_clock_enable(RCU_SYSCFG);         /*配置GPIO模式*/        gpio_mode_set(BSP_NEC_PORT,GPIO_MODE_INPUT,GPIO_PUPD_NONE,BSP_NEC_PIN);        /*配置中断优先级*/        nvic_irq_enable(BSP_NEC_IRQ,3U,3U);         /*配置GPIO中断线*/        syscfg_exti_line_config(BSP_NEC_EXTI_PORT,BSP_NEC_EXTI_PIN);        /*初始化中断*/        exti_init(BSP_NEC_EXTI,EXTI_INTERRUPT,EXTI_TRIG_BOTH);        /*使能中断*/        exti_interrupt_enable(BSP_NEC_EXTI);        /*清除中断标志位*/        exti_interrupt_flag_clear(BSP_NEC_EXTI);}/****************************************************************** * 函 数 名 称：timer_config * 函 数 说 明：配置定时器及定时器中断 * 函 数 形 参：pre=预分频值                per = 周期数 * 函 数 返 回：无 * 作       者：FuXiangyang * 备       注：无******************************************************************/void timer_config(uint16_t pre,uint16_t per){    /*  此处计数器时钟频率 PSC_CLK=200MHz/pre  */    timer_parameter_struct timer_initpara;     /*开启时钟*/    rcu_periph_clock_enable(BSP_TIMER_RCU);    /*配置定时器时钟*/    rcu_timer_clock_prescaler_config(RCU_TIMER_PSC_MUL4);    /*复位定时器*/    timer_deinit(BSP_TIMER);            timer_initpara.prescaler = pre - 1;      timer_initpara.alignedmode = TIMER_COUNTER_EDGE;                            timer_initpara.counterdirection = TIMER_COUNTER_UP;                         timer_initpara.clockdivision = TIMER_CKDIV_DIV1;                            timer_initpara.period = per - 1;                                   timer_initpara.repetitioncounter = 0;            timer_init(BSP_TIMER,&amp;timer_initpara);            nvic_irq_enable(TIMER2_IRQn,3U,2U); // 设置中断优先级为 3,2    /* 使能中断 */    timer_interrupt_enable(BSP_TIMER,TIMER_INT_UP);}/****************************************************************** * 函 数 名 称：start_timing * 函 数 说 明：开始计时 * 函 数 形 参：无 * 函 数 返 回：无 * 作       者：FuXiangyang * 备       注：无******************************************************************/void start_timing(void){        BSP_TIMER2_CNT &amp;= 0;        timer_enable(BSP_TIMER);}/****************************************************************** * 函 数 名 称：stop_timing * 函 数 说 明：停止计时 * 函 数 形 参：无 * 函 数 返 回：无 * 作       者：FuXiangyang * 备       注：无******************************************************************/void stop_timing(void){        timer_disable(BSP_TIMER);}/****************************************************************** * 函 数 名 称：get_count * 函 数 说 明：得到计数器当前的计数值 * 函 数 形 参：无 * 函 数 返 回：count=计数器当前计数值 * 作       者：FuXiangyang * 备       注：无******************************************************************/uint16_t get_count(void){        uint16_t count = BSP_TIMER2_CNT;        return count;}/****************************************************************** * 函 数 名 称：nec_decode * 函 数 说 明：初始化接收头引脚并设置中断 * 函 数 形 参：data=接收到的八位二进制数据 * 函 数 返 回：code=遥控器上按下的按键名 * 作       者：FuXiangyang * 备       注：无******************************************************************/uint8_t nec_decode(uint8_t data){        uint8_t code;        switch(data)        {                case 0x45: code = '1';break;                case 0x46: code = '2';break;                case 0x47: code = '3';break;                case 0x44: code = '4';break;                case 0x40: code = '5';break;                case 0x43: code = '6';break;                case 0x07: code = '7';break;                case 0x15: code = '8';break;                case 0x09: code = '9';break;                case 0x19: code = '0';break;                case 0x16: code = '*';break;                case 0x0D: code = '#';break;                case 0x08: code = 'L';break;//←                case 0x5A: code = 'R';break;//→                case 0x18: code = 'U';break;//↑                case 0x52: code = 'D';break;//↓                case 0x1C: code = 'Y';break;//OK                default:break;        }        return code;}/****************************************************************** * 函 数 名 称：nec_EXTI_IRQHandler * 函 数 说 明：中断处理函数，处理接收到的数据 * 函 数 形 参：无 * 函 数 返 回：无 * 作       者：FuXiangyang * 备       注：无******************************************************************/void nec_EXTI_IRQHandler(void){        switch(nec_trigger_count)        {                /*第一次进入中断，开始计时*/                case 0: start_timing();nec_trigger_count++;break;                /*第二次进入中断，停止计时*/                /*若计时时间在8ms到10ms之间则重新开始计时并检测下一次中断*/                case 1: stop_timing();                         if(get_count()&gt;8000 &amp;&amp; get_count()&lt;10000)                        {                             nec_trigger_count++;                             start_timing();                        }                        else                        {                             nec_trigger_count = 0;                        }                                break;                /*第三次进入中断，停止计时*/                /*如果计时时间在3.8ms到5.5ms之间则代表传输开始*/                case 2: stop_timing();                         if(get_count() &gt; 3800 &amp;&amp; get_count() &lt; 5500)                        {                              nec_trigger_count++;                              memset(data,0,sizeof(data));                              bit_count = 0;                        }                        else                        {                              nec_trigger_count = 0;                        }                                break;                /*对接收到的数据进行处理*/                default:                         if(gpio_input_bit_get(GPIOB,GPIO_PIN_3) == SET)                                 start_timing();                        else                        {                                stop_timing();                                if(get_count() &gt; 460 &amp;&amp; get_count() &lt; 660)                                        {}                                else if(get_count() &gt; 1450 &amp;&amp; get_count() &lt; 1900)                                  {                                        data[bit_count/8] |= 1 &lt;&lt; (bit_count % 8);                                                                                                        }                                else bit_count = 0;                                                                bit_count = (bit_count+1) % 32;                                        }        }        /*清除中断标志位*/        exti_interrupt_flag_clear(EXTI_3);}uint8_t get_data(void){        uint8_t code_;        if(bit_count == 31)/*若32位数据接收完成*/        {                code_ = nec_decode(data[2]);        }        else         {                code_ = 0;        }        return code_;}/****************************************************************** * 函 数 名 称：nec_EXTI_IRQHandler * 函 数 说 明：定时器中断处理函数，将所有变量清零 * 函 数 形 参：无 * 函 数 返 回：无 * 作       者：FuXiangyang * 备       注：无******************************************************************/void TIMER2_IRQHandler(){        /*若计数器计满时间则代表很长时间内无电平变化，将变量都清零*/        timer_interrupt_flag_clear(BSP_TIMER,TIMER_INT_FLAG_UP);        stop_timing();        bit_count = 0;        nec_trigger_count = 0;}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>bsp_nec.h代码的编写</strong></p><pre class="line-numbers language-C" data-language="C"><code class="language-C"> /********************************************************************************   * 测试硬件：立创·梁山派开发板GD32F470ZGT6    使用主频200Mhz    晶振25Mhz   * 版 本 号: V1.0   * 修改作者: FuXiangyang   * 修改日期: 2022年08月08日   * 功能介绍:           *********************************************************************************/ #ifndef _BSP_NEC_H#define _BSP_NEC_H#include "gd32f4xx.h"#include "systick.h"#include "string.h" #define BSP_NEC_RCU                 RCU_GPIOB#define BSP_NEC_PORT                GPIOB#define BSP_NEC_PIN                 GPIO_PIN_3#define BSP_NEC_IRQ                 EXTI3_IRQn#define BSP_NEC_EXTI_PORT           EXTI_SOURCE_GPIOB#define BSP_NEC_EXTI_PIN            EXTI_SOURCE_PIN3#define BSP_NEC_EXTI                EXTI_3#define nec_EXTI_IRQHandler         EXTI3_IRQHandler  #define BSP_TIMER_RCU               RCU_TIMER2#define BSP_TIMER                   TIMER2#define BSP_TIMER_IRQ               TIMER2_IRQn#define BSP_TIMER2_CNT              *(unsigned int*)(0x40000400U + 0x24U)#define BSP_TIMER_IRQHandler        TIMER2_IRQHandlerstatic uint8_t nec_trigger_count = 0;static uint8_t data[4];static uint8_t bit_count = 0; void nec_init(void); void timer_config(uint16_t pre,uint16_t per);void start_timing(void);void stop_timing(void);uint16_t get_count(void);uint8_t nec_decode(uint8_t data);uint8_t get_data(void);  #endif<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-移植验证"><a href="#5-移植验证" class="headerlink" title="5. 移植验证"></a>5. 移植验证</h2><p>  现象：  当按下遥控器按键后，串口打印出按下的按键。</p><p><img src="https://blogfxy.oss-cn-beijing.aliyuncs.com/pic_of_yanzheng.png"></p>]]></content>
      
      
      
        <tags>
            
            <tag> 移植 </tag>
            
            <tag> 梁山派 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>test1</title>
      <link href="/2023/08/30/test1/"/>
      <url>/2023/08/30/test1/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2023/08/30/hello-world/"/>
      <url>/2023/08/30/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
